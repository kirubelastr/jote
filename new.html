<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spinning Wheel</title>
    <style>
        /* Set the background color and remove margins */
        body {
            background-color: cadetblue;
            margin: 0;
            overflow: hidden;
        }

        /* Make the canvas a block element to remove the scroll bar */
        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <!-- Timer display -->
    <div id="timer" style="font-size: 20px; font-weight: bold;"></div>

    <!-- The canvas for drawing the wheels -->
    <canvas id="myCanvas" width="1500" height="700" style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>

    <!-- Spin button -->
    <button id="spinButton" style="font-size: 20px; padding: 10px 20px;">Spin Fast!</button>

    <!-- Information display -->
    <div id="info"></div>

    <!-- Output displays for the wheels -->
    <input type="text" id="wheel1Output" readonly>
    <input type="text" id="wheel2Output" readonly>
    <input type="text" id="wheel3Output" readonly>

    <!-- Table for displaying additional information -->
    <table id="myTable" border="1" style="width: 80%; height: 100px;">
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>

    <script>
        // Get the canvas and its context
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");

        // Define the centers and radii of the wheels
        var centersX = [canvas.width / 4, 3 * canvas.width / 4, canvas.width / 2];
        var centerY = canvas.height / 2;
        var radius = [canvas.height / 3, canvas.height / 3, canvas.height / 2.5];

    // Define the colors and values of the sectors for each wheel
    var colors1 = ["#FF0000", "#00FF00", "#0000FF", "#FFFF00", "#FF00FF", "#00FFFF"];
        var colors2 = ["#FF0000", "#00FF00", "#0000FF", "#FFFF00"];
        var colors3 = ["#FF0000", "#00FF00", "#0000FF", "#FFFF00", "#FF00FF", "#00FFFF", "#FF0000", "#00FF00", "#0000FF", "#FFFF00", "#FF00FF", "#00FFFF", "#FF0000", "#00FF00", "#0000FF", "#FFFF00", "#FF00FF", "#00FFFF", "#FF0000", "#00FF00", "#0000FF"];

        var values1 = ["Player 1", "Player 2", "Player 3", "Player 4", "Player 5", "Player 6"];
        var values2 = ["Order 1", "Order 2", "Order 3", "Order 4"];
        var values3 = ["Jote 1", "Jote 2", "Jote 3", "Jote 4", "Jote 5", "Jote 6", "Jote 7", "Jote 8", "Jote 9", "Jote 10", "Jote 11", "Jote 12", "Jote 13", "Jote 14", "Jote 15", "Jote 16", "Jote 17", "Jote 18", "Jote 19", "Jote 20", "Jote 21", "Jote 22"];


        // Group the colors and values for each wheel
        var colors = [colors1, colors2, colors3];
        var values = [values1, values2, values3];

        // Define the number of sectors for each wheel
        var numSectors = [values1.length, values2.length, values3.length];

        // Function to draw a sector of a wheel
        function drawSector(centerX, startAngle, endAngle, color, value, radius) {
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.arc(centerX, centerY, radius, startAngle, endAngle);
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.fill();

            // Draw the value in the middle of the sector
            var middleAngle = (startAngle + endAngle) / 2;
            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.rotate(middleAngle);
            ctx.textAlign = "center";
            ctx.fillStyle = "#000000";
            ctx.font = "30px Arial";
            ctx.fillText(value, radius / 2, 0);
            ctx.restore();
        }

        // Function to draw a pointer for a wheel
        function drawPointer(centerX, radius) {
            ctx.beginPath();
            ctx.moveTo(centerX + radius - 20, centerY);
            ctx.lineTo(centerX + radius + 20, centerY - 10);
            ctx.lineTo(centerX + radius + 20, centerY + 10);
            ctx.closePath();
            ctx.fillStyle = "#000000";
            ctx.fill();
        }

        // Define the rotation speeds and angles for each wheel
        var rotationSpeeds = [0.01, 0.01, 0.01];
        var rotationAngles = [0, 0, 0];

        // Function to rotate a wheel
        function rotateWheel() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (var j = 0; j < 3; j++) {
                ctx.save();
                ctx.translate(centersX[j], centerY);
                ctx.rotate(rotationAngles[j]);
                ctx.translate(-centersX[j], -centerY);
                var startAngle = 0;
                for (var i = 0; i < numSectors[j]; i++) {
                    var endAngle = startAngle + 2 * Math.PI / numSectors[j];
                    ctx.globalAlpha = 1;  // Make the wheel always fully opaque
                    drawSector(centersX[j], startAngle, endAngle, colors[j][i], values[j][i], radius[j]);
                    startAngle = endAngle;
                }
                ctx.restore();
                drawPointer(centersX[j], radius[j]);
                rotationAngles[j] += rotationSpeeds[j];
                var sector = Math.floor((rotationAngles[j]) / (2 * Math.PI) * numSectors[j]) % numSectors[j];
                document.getElementById("wheel" + (j + 1) + "Output").value = "Wheel " + (j + 1) + " - Color: " + colors[j][(numSectors[j] - sector - 1) % numSectors[j]] + ", Value: " + values[j][(numSectors[j] - sector - 1) % numSectors[j]];
            }
            requestAnimationFrame(rotateWheel);
        }

        // Start rotating the wheels
        rotateWheel();

        // Add an event listener for the spin button
        document.getElementById("spinButton").addEventListener("click", function() {
            // Set the rotation speeds for a fast spin
            rotationSpeeds = [0.1, 0.01, 0.01];

            // Start a countdown timer
            var timer = 30;
            var countdown = setInterval(function() {
                document.getElementById("timer").innerHTML = timer + " seconds remaining";
                timer--;
                if (timer < 0) {
                    clearInterval(countdown);
                    document.getElementById("timer").innerHTML = "";
                }
            }, 500);

            // After 10 seconds, slow down the first wheel and print its result
            setTimeout(function() {
                rotationSpeeds[0] = 0.01;
                rotationSpeeds[1] = 0.1;
                var sector = Math.floor((rotationAngles[0]) / (2 * Math.PI) * numSectors[0]) % numSectors[0];
                console.log("Fast spin result for Wheel 1: Color: " + colors[0][(numSectors[0] - sector - 1) % numSectors[0]] + ", Value: " + values[0][(numSectors[0] - sector - 1) % numSectors[0]]);
            }, 10000);

            // After 20 seconds, slow down the second wheel and print its result
            setTimeout(function() {
                rotationSpeeds[1] = 0.01;
                rotationSpeeds[2] = 0.1;
                var sector = Math.floor((rotationAngles[1]) / (2 * Math.PI) * numSectors[1]) % numSectors[1];
                console.log("Fast spin result for Wheel 2: Color: " + colors[1][(numSectors[1] - sector - 1) % numSectors[1]] + ", Value: " + values[1][(numSectors[1] - sector - 1) % numSectors[1]]);
            }, 20000);

            // After 30 seconds, slow down the third wheel and print its result
          // After 30 seconds, slow down the third wheel and print its result
            setTimeout(function() {
                rotationSpeeds[2] = 0.01;
                var sector = Math.floor((rotationAngles[2]) / (2 * Math.PI) * numSectors[2]) % numSectors[2];
                var forbiddenSectors = [0, 2];  // Replace with your own indices
                while (forbiddenSectors.includes(sector)) {
                    // If the wheel landed on a forbidden section, increase the rotation angle
                    // by a small fraction to make it land on the next section
                    rotationAngles[2] += 0.01;
                    sector = Math.floor((rotationAngles[2]) / (2 * Math.PI) * numSectors[2]) % numSectors[2];
                }
                console.log("Fast spin result for Wheel 3: Color: " + colors[2][(numSectors[2] - sector - 1) % numSectors[2]] + ", Value: " + values[2][(numSectors[2] - sector - 1) % numSectors[2]]);
            }, 30000);

        });
    </script>
</body>

</html>
